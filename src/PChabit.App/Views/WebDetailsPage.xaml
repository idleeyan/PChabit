<?xml version="1.0" encoding="UTF-8" ?>
<Page
    x:Class="PChabit.App.Views.WebDetailsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">
    
    <ScrollViewer Padding="24">
        <StackPanel Spacing="24">
            <Grid>
                <TextBlock
                    FontSize="24"
                    FontWeight="SemiBold"
                    Text="网页访问详情" />
                
                <StackPanel
                    HorizontalAlignment="Right"
                    Orientation="Horizontal"
                    Spacing="8">
                    <Button
                        Padding="12,6"
                        Click="Today_Click"
                        Content="今天" />
                    <Button
                        Padding="12,6"
                        Click="Week_Click"
                        Content="近7天" />
                    <Button
                        Padding="12,6"
                        Click="Month_Click"
                        Content="近30天" />
                    <Button
                        Padding="12,6"
                        Click="Refresh_Click"
                        Content="&#xE72C;"
                        FontFamily="Segoe MDL2 Assets"
                        ToolTipService.ToolTip="刷新" />
                </StackPanel>
            </Grid>
            
            <Grid ColumnSpacing="12">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                
                <CalendarDatePicker
                    x:Name="StartDatePicker"
                    Grid.Column="0"
                    Header="开始日期"
                    HorizontalAlignment="Stretch" />
                
                <CalendarDatePicker
                    x:Name="EndDatePicker"
                    Grid.Column="1"
                    Header="结束日期"
                    HorizontalAlignment="Stretch" />
                
                <Button
                    Grid.Column="2"
                    Margin="0,28,0,0"
                    Padding="16,8"
                    Click="Search_Click"
                    Content="查询" />
            </Grid>
            
            <Grid ColumnSpacing="12">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                
                <TextBox
                    x:Name="SearchTextBox"
                    Grid.Column="0"
                    PlaceholderText="搜索域名或标题..." />
                
                <ComboBox
                    x:Name="CategoryComboBox"
                    Grid.Column="1"
                    HorizontalAlignment="Stretch"
                    Header="分类筛选">
                    <ComboBoxItem Content="全部分类" />
                    <ComboBoxItem Content="搜索" />
                    <ComboBoxItem Content="开发" />
                    <ComboBoxItem Content="视频" />
                    <ComboBoxItem Content="社交" />
                    <ComboBoxItem Content="购物" />
                    <ComboBoxItem Content="邮件" />
                    <ComboBoxItem Content="办公" />
                    <ComboBoxItem Content="新闻" />
                    <ComboBoxItem Content="浏览" />
                </ComboBox>
            </Grid>
            
            <Grid x:Name="StatsGrid" ColumnSpacing="16" RowSpacing="16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                
                <Border
                    Grid.Column="0"
                    Padding="16"
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1"
                    CornerRadius="12">
                    <StackPanel Spacing="4">
                        <TextBlock
                            FontSize="12"
                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                            Text="总访问次数" />
                        <TextBlock
                            x:Name="TotalVisitsText"
                            FontSize="20"
                            FontWeight="SemiBold"
                            Text="0" />
                    </StackPanel>
                </Border>
                
                <Border
                    Grid.Column="1"
                    Padding="16"
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1"
                    CornerRadius="12">
                    <StackPanel Spacing="4">
                        <TextBlock
                            FontSize="12"
                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                            Text="总浏览时长" />
                        <TextBlock
                            x:Name="TotalDurationText"
                            FontSize="20"
                            FontWeight="SemiBold"
                            Text="0分钟" />
                    </StackPanel>
                </Border>
                
                <Border
                    Grid.Column="2"
                    Padding="16"
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1"
                    CornerRadius="12">
                    <StackPanel Spacing="4">
                        <TextBlock
                            FontSize="12"
                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                            Text="独立域名数" />
                        <TextBlock
                            x:Name="UniqueDomainsText"
                            FontSize="20"
                            FontWeight="SemiBold"
                            Text="0" />
                    </StackPanel>
                </Border>
                
                <Border
                    Grid.Column="3"
                    Padding="16"
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1"
                    CornerRadius="12">
                    <StackPanel Spacing="4">
                        <TextBlock
                            FontSize="12"
                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                            Text="平均时长" />
                        <TextBlock
                            x:Name="AvgDurationText"
                            FontSize="20"
                            FontWeight="SemiBold"
                            Text="0秒" />
                    </StackPanel>
                </Border>
                
                <Border
                    Grid.Column="4"
                    Padding="16"
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1"
                    CornerRadius="12">
                    <StackPanel Spacing="4">
                        <TextBlock
                            FontSize="12"
                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                            Text="活跃时段" />
                        <TextBlock
                            x:Name="PeakHourText"
                            FontSize="20"
                            FontWeight="SemiBold"
                            Text="-" />
                    </StackPanel>
                </Border>
                
                <Border
                    Grid.Column="5"
                    Padding="16"
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1"
                    CornerRadius="12">
                    <StackPanel Spacing="4">
                        <TextBlock
                            FontSize="12"
                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                            Text="最常访问" />
                        <TextBlock
                            x:Name="TopDomainText"
                            FontSize="16"
                            FontWeight="SemiBold"
                            MaxLines="1"
                            Text="-"
                            TextTrimming="CharacterEllipsis" />
                    </StackPanel>
                </Border>
            </Grid>
            
            <Grid ColumnSpacing="16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                
                <Border
                    Grid.Column="0"
                    Padding="16"
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1"
                    CornerRadius="12">
                    <StackPanel Spacing="16">
                        <TextBlock
                            FontSize="16"
                            FontWeight="SemiBold"
                            Text="网站访问排行" />
                        
                        <ListView
                            x:Name="DomainStatsList"
                            SelectionMode="None">
                            <ListView.ItemTemplate>
                                <DataTemplate>
                                    <Grid Margin="0,8">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="80" />
                                            <ColumnDefinition Width="80" />
                                        </Grid.ColumnDefinitions>
                                        
                                        <StackPanel Spacing="2">
                                            <TextBlock FontWeight="Medium" Text="{Binding Domain}" />
                                            <Border
                                                Padding="6,2"
                                                HorizontalAlignment="Left"
                                                Background="{ThemeResource SubtleFillColorSecondaryBrush}"
                                                CornerRadius="4">
                                                <TextBlock
                                                    FontSize="11"
                                                    Text="{Binding Category}" />
                                            </Border>
                                        </StackPanel>
                                        
                                        <TextBlock
                                            Grid.Column="1"
                                            VerticalAlignment="Center"
                                            Text="{Binding VisitCount}" />
                                        
                                        <TextBlock
                                            Grid.Column="2"
                                            VerticalAlignment="Center"
                                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                            Text="{Binding FormattedDuration}" />
                                    </Grid>
                                </DataTemplate>
                            </ListView.ItemTemplate>
                        </ListView>
                    </StackPanel>
                </Border>
                
                <Border
                    Grid.Column="1"
                    Padding="16"
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1"
                    CornerRadius="12">
                    <StackPanel Spacing="16">
                        <TextBlock
                            FontSize="16"
                            FontWeight="SemiBold"
                            Text="浏览习惯分析" />
                        
                        <ItemsControl x:Name="BrowsingPatternsList">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border
                                        Margin="0,0,0,12"
                                        Padding="12"
                                        Background="{ThemeResource SubtleFillColorSecondaryBrush}"
                                        CornerRadius="8">
                                        <StackPanel Spacing="4">
                                            <TextBlock
                                                FontSize="13"
                                                FontWeight="Medium"
                                                Text="{Binding Pattern}" />
                                            <TextBlock
                                                FontSize="12"
                                                Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                                MaxLines="2"
                                                Text="{Binding Description}"
                                                TextTrimming="CharacterEllipsis" />
                                        </StackPanel>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>
                </Border>
            </Grid>
            
            <Grid ColumnSpacing="16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                
                <Border
                    Grid.Column="0"
                    Padding="16"
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1"
                    CornerRadius="12">
                    <StackPanel Spacing="16">
                        <TextBlock
                            FontSize="16"
                            FontWeight="SemiBold"
                            Text="每小时活动分布" />
                        
                        <ListView
                            x:Name="HourlyActivityList"
                            SelectionMode="None"
                            MaxHeight="300">
                            <ListView.ItemTemplate>
                                <DataTemplate>
                                    <Grid Margin="0,2">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="50" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="60" />
                                        </Grid.ColumnDefinitions>
                                        
                                        <TextBlock Text="{Binding HourLabel}" />
                                        <ProgressBar
                                            Grid.Column="1"
                                            Margin="8,0"
                                            VerticalAlignment="Center"
                                            Maximum="50"
                                            Value="{Binding VisitCount}" />
                                        <TextBlock
                                            Grid.Column="2"
                                            HorizontalAlignment="Right"
                                            Text="{Binding VisitCount}" />
                                    </Grid>
                                </DataTemplate>
                            </ListView.ItemTemplate>
                        </ListView>
                    </StackPanel>
                </Border>
                
                <Border
                    Grid.Column="1"
                    Padding="16"
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1"
                    CornerRadius="12">
                    <StackPanel Spacing="16">
                        <TextBlock
                            FontSize="16"
                            FontWeight="SemiBold"
                            Text="每日访问趋势" />
                        
                        <ListView
                            x:Name="DailyTrendList"
                            SelectionMode="None"
                            MaxHeight="300">
                            <ListView.ItemTemplate>
                                <DataTemplate>
                                    <Grid Margin="0,4">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="60" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="60" />
                                            <ColumnDefinition Width="60" />
                                        </Grid.ColumnDefinitions>
                                        
                                        <TextBlock Text="{Binding DateLabel}" />
                                        
                                        <ProgressBar
                                            Grid.Column="1"
                                            Margin="8,0"
                                            VerticalAlignment="Center"
                                            Maximum="100"
                                            Value="{Binding VisitCount}" />
                                        
                                        <TextBlock
                                            Grid.Column="2"
                                            HorizontalAlignment="Right"
                                            Text="{Binding VisitCount}" />
                                        
                                        <TextBlock
                                            Grid.Column="3"
                                            HorizontalAlignment="Right"
                                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                            Text="{Binding UniqueDomains}" />
                                    </Grid>
                                </DataTemplate>
                            </ListView.ItemTemplate>
                        </ListView>
                    </StackPanel>
                </Border>
            </Grid>
            
            <Border
                Padding="16"
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                BorderThickness="1"
                CornerRadius="12">
                <StackPanel Spacing="16">
                    <TextBlock
                        FontSize="16"
                        FontWeight="SemiBold"
                        Text="最近访问记录" />
                    
                    <ListView
                        x:Name="RecentVisitsList"
                        SelectionMode="None"
                        MaxHeight="400">
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <Border
                                    Margin="0,4"
                                    Padding="12"
                                    Background="{ThemeResource SubtleFillColorSecondaryBrush}"
                                    CornerRadius="8">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="80" />
                                            <ColumnDefinition Width="80" />
                                        </Grid.ColumnDefinitions>
                                        
                                        <StackPanel Spacing="4">
                                            <Grid>
                                                <TextBlock
                                                    FontWeight="Medium"
                                                    MaxLines="1"
                                                    Text="{Binding Title}"
                                                    TextTrimming="CharacterEllipsis" />
                                                <Border
                                                    Padding="6,2"
                                                    HorizontalAlignment="Right"
                                                    CornerRadius="4"
                                                    Background="{Binding CategoryColor}">
                                                    <TextBlock
                                                        FontSize="11"
                                                        Text="{Binding Category}" />
                                                </Border>
                                            </Grid>
                                            <TextBlock
                                                FontSize="12"
                                                Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                                MaxLines="1"
                                                Text="{Binding Domain}"
                                                TextTrimming="CharacterEllipsis" />
                                        </StackPanel>
                                        
                                        <TextBlock
                                            Grid.Column="1"
                                            VerticalAlignment="Center"
                                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                            Text="{Binding VisitTime}" />
                                        
                                        <TextBlock
                                            Grid.Column="2"
                                            VerticalAlignment="Center"
                                            Text="{Binding Duration}" />
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</Page>
